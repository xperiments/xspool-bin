<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>XTouch Web Installer</title>
    

    <meta name="color-scheme" content="light dark" />
    <meta
      name="viewport"
      content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />

    <link rel="stylesheet" href="./public/index.css" />
  </head>
  <body>
    <script
      type="module"
      src="https://unpkg.com/esp-web-tools@9.4.0/dist/web/install-button.js?module"
    ></script>
    <div class="fakeIframe">
      <div class="app">
        <div class="app-content xspool-bg install">
          <svg
            height="100"
            width="100%"
            viewBox="0 0 193 79"
            xmlns="http://www.w3.org/2000/svg"
            fill="#42AE00"
          >
            <path
              d="M20.604 33.08c3.776 0 6.976.704 9.6 2.112 2.624 1.408 4.608 3.04 5.952 4.896 1.728 1.984 2.88 4.16 3.456 6.528.64 2.176.96 4.32.96 6.432 0 1.664-.608 3.072-1.824 4.224C37.532 58.424 36.188 59 34.716 59c-1.664 0-3.072-.576-4.224-1.728-1.152-1.344-1.728-2.752-1.728-4.224l-.288-2.304a6.08 6.08 0 0 0-1.056-2.688c-.512-.896-1.344-1.632-2.496-2.208-1.088-.64-2.528-.96-4.32-.96-1.792 0-3.488-.192-5.088-.576-1.6-.384-3.04-.864-4.32-1.44-2.624-1.472-4.736-3.2-6.336-5.184-1.536-1.984-2.624-4.096-3.264-6.336A20.51 20.51 0 0 1 .54 24.824c0-1.6.576-2.976 1.728-4.128 1.344-1.152 2.752-1.728 4.224-1.728 1.6 0 2.976.608 4.128 1.824 1.152 1.216 1.728 2.56 1.728 4.032.128.512.192 1.28.192 2.304.32 1.216.704 2.144 1.152 2.784.704 1.024 1.568 1.824 2.592 2.4 1.024.512 2.464.768 4.32.768ZM6.492 47.192c1.6 0 2.976.608 4.128 1.824 1.152 1.216 1.728 2.56 1.728 4.032 0 1.664-.608 3.072-1.824 4.224C9.308 58.424 7.964 59 6.492 59c-1.664 0-3.072-.576-4.224-1.728C1.116 55.928.54 54.52.54 53.048c0-1.6.576-2.976 1.728-4.128 1.344-1.152 2.752-1.728 4.224-1.728Zm28.224-28.224c1.6 0 2.976.608 4.128 1.824 1.152 1.216 1.728 2.56 1.728 4.032 0 1.664-.608 3.072-1.824 4.224-1.216 1.152-2.56 1.728-4.032 1.728-1.664 0-3.072-.576-4.224-1.728-1.152-1.344-1.728-2.752-1.728-4.224 0-1.6.576-2.976 1.728-4.128 1.344-1.152 2.752-1.728 4.224-1.728ZM46.615 29.48c0-3.04 1.014-5.573 3.04-7.6 2.08-2.027 5.147-3.04 9.2-3.04 4.107 0 7.254 1.013 9.44 3.04 2.187 1.973 3.28 4.907 3.28 8.8 0 .427-.16.8-.48 1.12-.266.267-.613.4-1.04.4h-.72c-.426 0-.8-.133-1.12-.4-.267-.32-.4-.667-.4-1.04 0-5.387-3.013-8.08-9.04-8.08-2.773 0-4.88.667-6.32 2-1.386 1.333-2.08 3.013-2.08 5.04s.667 3.653 2 4.88c1.387 1.173 3.974 2.133 7.76 2.88 3.787.747 6.747 1.92 8.88 3.52 2.133 1.6 3.2 4 3.2 7.2 0 3.147-1.173 5.787-3.52 7.92-2.293 2.08-5.52 3.12-9.68 3.12-4.107 0-7.44-1.04-10-3.12-2.56-2.133-3.84-5.253-3.84-9.36 0-1.12.534-1.68 1.6-1.68h.64c1.014 0 1.52.533 1.52 1.6 0 5.813 3.44 8.72 10.32 8.72 3.093 0 5.387-.693 6.88-2.08 1.547-1.44 2.32-3.2 2.32-5.28s-.8-3.573-2.4-4.48c-1.6-.96-4.4-1.867-8.4-2.72-3.947-.853-6.773-2.213-8.48-4.08-1.706-1.867-2.56-4.293-2.56-7.28ZM76.861 32.04c0-4.16 1.254-7.387 3.76-9.68 2.56-2.347 5.867-3.52 9.92-3.52 4.107 0 7.44 1.147 10 3.44 2.56 2.293 3.84 5.547 3.84 9.76v13.92c0 4.107-1.28 7.333-3.84 9.68-2.56 2.347-5.893 3.52-10 3.52-4.053 0-7.36-1.093-9.92-3.28v21.6c0 1.013-.506 1.52-1.52 1.52h-.72c-1.013 0-1.52-.507-1.52-1.52V32.04Zm20.88-6.96c-1.866-1.6-4.24-2.4-7.12-2.4s-5.28.827-7.2 2.48c-1.866 1.6-2.8 3.92-2.8 6.96v19.44c3.254 2.507 6.454 3.76 9.6 3.76 3.147 0 5.654-.827 7.52-2.48 1.92-1.653 2.88-4 2.88-7.04V32.12c0-3.093-.96-5.44-2.88-7.04ZM110.803 32.04c0-4.213 1.28-7.467 3.84-9.76 2.56-2.293 5.893-3.44 10-3.44 4.106 0 7.413 1.173 9.92 3.52 2.506 2.293 3.76 5.52 3.76 9.68v13.92c0 4.16-1.254 7.413-3.76 9.76-2.507 2.293-5.814 3.44-9.92 3.44-4.054 0-7.387-1.147-10-3.44-2.56-2.347-3.84-5.6-3.84-9.76V32.04Zm23.76 0c0-3.04-.934-5.36-2.8-6.96-1.867-1.653-4.24-2.48-7.12-2.48s-5.28.827-7.2 2.48c-1.92 1.6-2.88 3.92-2.88 6.96v13.92c0 3.04.96 5.387 2.88 7.04 1.92 1.6 4.32 2.4 7.2 2.4s5.253-.8 7.12-2.4c1.866-1.653 2.8-4 2.8-7.04V32.04ZM144.315 32.04c0-4.213 1.28-7.467 3.84-9.76 2.56-2.293 5.894-3.44 10-3.44 4.107 0 7.414 1.173 9.92 3.52 2.507 2.293 3.76 5.52 3.76 9.68v13.92c0 4.16-1.253 7.413-3.76 9.76-2.506 2.293-5.813 3.44-9.92 3.44-4.053 0-7.386-1.147-10-3.44-2.56-2.347-3.84-5.6-3.84-9.76V32.04Zm23.76 0c0-3.04-.933-5.36-2.8-6.96-1.866-1.653-4.24-2.48-7.12-2.48s-5.28.827-7.2 2.48c-1.92 1.6-2.88 3.92-2.88 6.96v13.92c0 3.04.96 5.387 2.88 7.04 1.92 1.6 4.32 2.4 7.2 2.4s5.254-.8 7.12-2.4c1.867-1.653 2.8-4 2.8-7.04V32.04ZM180.428.6h.64c1.013 0 1.52.507 1.52 1.52v44.56c0 5.707 2.426 8.56 7.28 8.56h1.28c.426 0 .773.16 1.04.48.32.32.48.667.48 1.04v.64c0 1.067-.96 1.6-2.88 1.6-3.627 0-6.374-1.04-8.24-3.12-1.867-2.08-2.774-5.12-2.72-9.12V2.12c0-1.013.533-1.52 1.6-1.52ZM134.509 69.634c-4.819 2.532-9.375 2.377-9.856 2.357-.419.02-4.982.175-9.801-2.357 0 0-.723-.66-.289-1.64.433-.98 1.589-.641 1.589-.641s3.797 2.052 8.46 1.998h.072c4.664.054 8.525-1.998 8.525-1.998s1.156-.34 1.589.64c.434.981-.289 1.64-.289 1.64Zm-2.167-4.912c-3.612 2.066-7.208 1.925-7.689 1.905-.419.02-3.87.16-7.775-1.902 0 0-.723-.66-.289-1.64.433-.98 1.589-.64 1.589-.64s1.81 1.327 6.434 1.542h.072c4.624-.14 6.358-1.546 6.358-1.546s1.156-.339 1.589.641c.434.98-.289 1.64-.289 1.64ZM114.852 8.358c4.819-2.533 9.376-2.378 9.857-2.358.418-.02 4.981-.175 9.8 2.358 0 0 .723.66.289 1.64-.433.98-1.589.64-1.589.64s-3.796-2.052-8.46-1.998h-.072c-4.664-.054-8.525 1.998-8.525 1.998s-1.156.34-1.589-.64c-.434-.98.289-1.64.289-1.64Zm2.167 4.911c3.612-2.065 7.209-1.925 7.69-1.905.418-.02 3.87-.16 7.774 1.903 0 0 .723.66.289 1.64-.433.98-1.589.64-1.589.64s-1.81-1.328-6.434-1.543h-.072c-4.624.14-6.357 1.546-6.357 1.546s-1.156.34-1.59-.64c-.433-.981.289-1.64.289-1.64Z"
            />
          </svg>
          <esp-web-install-button
            manifest="webusb/xspool-manifest.json"
            title="dassd"
          >
            <button class="installButton" slot="activate">
              INSTALL XSPOOL
            </button>
          </esp-web-install-button>

          <a href="https://ko-fi.com/I3I8PSAYU" rel="nofollow"
            ><svg
              xmlns="http://www.w3.org/2000/svg"
              width="223"
              height="30"
              viewBox="0 0 223 30"
              fill="none"
            >
              <g clip-path="url(#clip0_2178_644)">
                <path
                  d="M215 0H8C3.58172 0 0 3.58172 0 8V22C0 26.4183 3.58172 30 8 30H215C219.418 30 223 26.4183 223 22V8C223 3.58172 219.418 0 215 0Z"
                  fill="#42ae00"
                />
                <path
                  d="M60.327 20.1697C59.6106 20.1697 58.9742 20.0424 58.418 19.7879C57.8619 19.5334 57.4282 19.1704 57.1171 18.6991C56.806 18.2277 56.6458 17.6668 56.6363 17.0163H58.4322C58.4322 17.3463 58.5076 17.6432 58.6584 17.9072C58.8187 18.1617 59.0355 18.3644 59.3089 18.5152C59.5917 18.6661 59.9311 18.7415 60.327 18.7415C60.6664 18.7415 60.9587 18.6896 61.2038 18.5859C61.4583 18.4728 61.6515 18.3173 61.7835 18.1193C61.9249 17.9119 61.9956 17.6715 61.9956 17.3981C61.9956 17.087 61.9202 16.8325 61.7694 16.6345C61.628 16.4271 61.43 16.2527 61.1755 16.1113C60.9209 15.9699 60.6287 15.8474 60.2988 15.7437C59.9688 15.6305 59.62 15.5127 59.2523 15.3902C58.4699 15.1262 57.8807 14.7915 57.4848 14.3862C57.0888 13.9714 56.8909 13.4199 56.8909 12.7317C56.8909 12.1567 57.0276 11.6617 57.3009 11.2469C57.5743 10.8322 57.9561 10.5116 58.4463 10.2854C58.946 10.0497 59.521 9.93186 60.1715 9.93186C60.8314 9.93186 61.4064 10.0497 61.8966 10.2854C62.3963 10.5211 62.7875 10.851 63.0703 11.2752C63.3626 11.69 63.5134 12.1897 63.5228 12.7741H61.7128C61.7034 12.529 61.6374 12.3028 61.5149 12.0954C61.3923 11.8786 61.2132 11.7042 60.9775 11.5722C60.7513 11.4308 60.4732 11.3601 60.1432 11.3601C59.8604 11.3506 59.6059 11.3978 59.3796 11.5015C59.1628 11.5957 58.9884 11.7372 58.8564 11.9257C58.7339 12.1048 58.6726 12.3311 58.6726 12.6044C58.6726 12.8684 58.7291 13.0899 58.8423 13.2691C58.9648 13.4387 59.1392 13.5849 59.3655 13.7074C59.5917 13.8205 59.8557 13.929 60.1573 14.0326C60.459 14.1363 60.789 14.2495 61.1472 14.372C61.6374 14.5323 62.0805 14.7303 62.4764 14.9659C62.8818 15.1922 63.2023 15.4891 63.438 15.8568C63.6737 16.2244 63.7915 16.7005 63.7915 17.285C63.7915 17.7941 63.6595 18.2701 63.3956 18.7132C63.1316 19.1468 62.7451 19.5004 62.236 19.7737C61.727 20.0377 61.0906 20.1697 60.327 20.1697ZM67.7463 20.1697C67.1713 20.1697 66.6764 20.0566 66.2616 19.8303C65.8562 19.5946 65.5451 19.2458 65.3283 18.7839C65.1115 18.3126 65.0031 17.7328 65.0031 17.0446V12.8731H66.6999V16.8749C66.6999 17.4877 66.8272 17.9543 67.0817 18.2748C67.3457 18.5859 67.7416 18.7415 68.2695 18.7415C68.6089 18.7415 68.9106 18.6614 69.1745 18.5011C69.4479 18.3408 69.66 18.1099 69.8109 17.8082C69.9711 17.4971 70.0513 17.12 70.0513 16.6769V12.8731H71.7481V20H70.2492L70.122 18.8122C69.9051 19.227 69.5893 19.5569 69.1745 19.802C68.7692 20.0471 68.2931 20.1697 67.7463 20.1697ZM73.3533 23.1109V12.8731H74.8664L75.0502 13.9054C75.201 13.698 75.3802 13.5047 75.5875 13.3256C75.8044 13.1371 76.0636 12.9862 76.3653 12.8731C76.6764 12.76 77.0299 12.7034 77.4258 12.7034C78.0952 12.7034 78.6843 12.8684 79.1934 13.1984C79.7119 13.5283 80.1173 13.9761 80.4095 14.5417C80.7017 15.0979 80.8479 15.7342 80.8479 16.4507C80.8479 17.1672 80.697 17.8082 80.3954 18.3738C80.1031 18.93 79.6978 19.3684 79.1793 19.6889C78.6702 20.0094 78.0857 20.1697 77.4258 20.1697C76.8885 20.1697 76.4171 20.0707 76.0118 19.8727C75.6158 19.6653 75.2953 19.3731 75.0502 18.996V23.1109H73.3533ZM77.0723 18.6991C77.4683 18.6991 77.8218 18.6048 78.1329 18.4162C78.444 18.2277 78.6843 17.9637 78.854 17.6244C79.0332 17.285 79.1227 16.8938 79.1227 16.4507C79.1227 15.9982 79.0332 15.6023 78.854 15.2629C78.6843 14.9235 78.444 14.6596 78.1329 14.471C77.8218 14.2825 77.4683 14.1882 77.0723 14.1882C76.667 14.1882 76.3087 14.2825 75.9976 14.471C75.696 14.6596 75.4556 14.9235 75.2765 15.2629C75.1068 15.6023 75.0219 15.9935 75.0219 16.4366C75.0219 16.8891 75.1068 17.285 75.2765 17.6244C75.4556 17.9543 75.696 18.2183 75.9976 18.4162C76.3087 18.6048 76.667 18.6991 77.0723 18.6991ZM82.2122 23.1109V12.8731H83.7253L83.9091 13.9054C84.0599 13.698 84.239 13.5047 84.4464 13.3256C84.6633 13.1371 84.9225 12.9862 85.2242 12.8731C85.5353 12.76 85.8888 12.7034 86.2847 12.7034C86.954 12.7034 87.5432 12.8684 88.0523 13.1984C88.5708 13.5283 88.9762 13.9761 89.2684 14.5417C89.5606 15.0979 89.7068 15.7342 89.7068 16.4507C89.7068 17.1672 89.5559 17.8082 89.2543 18.3738C88.962 18.93 88.5567 19.3684 88.0382 19.6889C87.5291 20.0094 86.9446 20.1697 86.2847 20.1697C85.7474 20.1697 85.276 20.0707 84.8707 19.8727C84.4747 19.6653 84.1542 19.3731 83.9091 18.996V23.1109H82.2122ZM85.9312 18.6991C86.3271 18.6991 86.6807 18.6048 86.9918 18.4162C87.3028 18.2277 87.5432 17.9637 87.7129 17.6244C87.892 17.285 87.9816 16.8938 87.9816 16.4507C87.9816 15.9982 87.892 15.6023 87.7129 15.2629C87.5432 14.9235 87.3028 14.6596 86.9918 14.471C86.6807 14.2825 86.3271 14.1882 85.9312 14.1882C85.5258 14.1882 85.1676 14.2825 84.8565 14.471C84.5549 14.6596 84.3145 14.9235 84.1353 15.2629C83.9657 15.6023 83.8808 15.9935 83.8808 16.4366C83.8808 16.8891 83.9657 17.285 84.1353 17.6244C84.3145 17.9543 84.5549 18.2183 84.8565 18.4162C85.1676 18.6048 85.5258 18.6991 85.9312 18.6991ZM94.3942 20.1697C93.7154 20.1697 93.1026 20.0141 92.5559 19.703C92.0185 19.3825 91.5943 18.9442 91.2832 18.388C90.9816 17.8223 90.8307 17.1766 90.8307 16.4507C90.8307 15.706 90.9863 15.0555 91.2974 14.4993C91.6085 13.9337 92.0327 13.4953 92.57 13.1842C93.1168 12.8637 93.7296 12.7034 94.4083 12.7034C95.0871 12.7034 95.6951 12.8637 96.2324 13.1842C96.7792 13.4953 97.2034 13.929 97.5051 14.4851C97.8162 15.0413 97.9717 15.6918 97.9717 16.4366C97.9717 17.1813 97.8162 17.8318 97.5051 18.388C97.194 18.9442 96.7651 19.3825 96.2183 19.703C95.681 20.0141 95.0729 20.1697 94.3942 20.1697ZM94.3942 18.7132C94.7335 18.7132 95.0399 18.6284 95.3133 18.4587C95.5961 18.289 95.8224 18.0345 95.9921 17.6951C96.1617 17.3557 96.2466 16.9362 96.2466 16.4366C96.2466 15.9369 96.1617 15.5221 95.9921 15.1922C95.8318 14.8528 95.6103 14.5983 95.3274 14.4286C95.0541 14.2589 94.7477 14.1741 94.4083 14.1741C94.0784 14.1741 93.772 14.2589 93.4892 14.4286C93.2063 14.5983 92.9801 14.8528 92.8104 15.1922C92.6407 15.5221 92.5559 15.9369 92.5559 16.4366C92.5559 16.9362 92.6407 17.3557 92.8104 17.6951C92.9801 18.0345 93.2016 18.289 93.475 18.4587C93.7578 18.6284 94.0642 18.7132 94.3942 18.7132ZM99.35 20V12.8731H100.863L101.019 14.2023C101.188 13.8912 101.4 13.6273 101.655 13.4105C101.909 13.1842 102.206 13.0098 102.546 12.8873C102.895 12.7647 103.276 12.7034 103.691 12.7034V14.4993H103.097C102.814 14.4993 102.546 14.537 102.291 14.6124C102.037 14.6784 101.815 14.7915 101.627 14.9518C101.448 15.1026 101.306 15.3147 101.202 15.5881C101.099 15.8521 101.047 16.1867 101.047 16.5921V20H99.35ZM107.784 20C107.304 20 106.884 19.9246 106.526 19.7737C106.177 19.6229 105.904 19.3731 105.706 19.0243C105.508 18.6755 105.409 18.2041 105.409 17.6102V14.3013H104.193V12.8731H105.409L105.607 10.9924H107.106V12.8731H109.043V14.3013H107.106V17.6102C107.106 17.9685 107.181 18.2183 107.332 18.3597C107.492 18.4917 107.756 18.5577 108.124 18.5577H109V20H107.784ZM113.526 20V12.8731H115.025L115.166 13.8488C115.393 13.4906 115.69 13.2125 116.057 13.0145C116.434 12.8071 116.863 12.7034 117.344 12.7034C117.702 12.7034 118.023 12.7506 118.306 12.8448C118.598 12.9391 118.852 13.0805 119.069 13.2691C119.295 13.4576 119.479 13.6933 119.621 13.9761C119.885 13.5801 120.229 13.2691 120.653 13.0428C121.077 12.8166 121.539 12.7034 122.039 12.7034C122.633 12.7034 123.137 12.826 123.552 13.0711C123.967 13.3068 124.282 13.6603 124.499 14.1316C124.716 14.5936 124.824 15.1639 124.824 15.8427V20H123.142V16.0123C123.142 15.409 123.019 14.9471 122.774 14.6266C122.529 14.306 122.166 14.1458 121.685 14.1458C121.355 14.1458 121.063 14.2259 120.808 14.3862C120.563 14.5464 120.37 14.7821 120.229 15.0932C120.087 15.3949 120.017 15.7672 120.017 16.2103V20H118.334V16.0123C118.334 15.409 118.211 14.9471 117.966 14.6266C117.721 14.306 117.353 14.1458 116.863 14.1458C116.552 14.1458 116.269 14.2259 116.015 14.3862C115.77 14.5464 115.576 14.7821 115.435 15.0932C115.294 15.3949 115.223 15.7672 115.223 16.2103V20H113.526ZM129.672 20.1697C128.964 20.1697 128.342 20.0189 127.805 19.7172C127.268 19.4061 126.848 18.9724 126.546 18.4162C126.245 17.86 126.094 17.219 126.094 16.4931C126.094 15.739 126.24 15.0791 126.532 14.5134C126.834 13.9478 127.253 13.5047 127.791 13.1842C128.338 12.8637 128.969 12.7034 129.686 12.7034C130.383 12.7034 130.991 12.859 131.51 13.1701C132.028 13.4812 132.429 13.9007 132.712 14.4286C132.995 14.9471 133.136 15.5316 133.136 16.182C133.136 16.2763 133.136 16.38 133.136 16.4931C133.136 16.6062 133.127 16.7241 133.108 16.8466H127.31V15.7578H131.425C131.406 15.2393 131.232 14.834 130.902 14.5417C130.572 14.24 130.162 14.0892 129.672 14.0892C129.323 14.0892 129.002 14.1693 128.71 14.3296C128.418 14.4899 128.187 14.7303 128.017 15.0508C127.847 15.3619 127.763 15.7578 127.763 16.2386V16.6487C127.763 17.0917 127.843 17.4735 128.003 17.7941C128.173 18.1146 128.399 18.3597 128.682 18.5294C128.974 18.6896 129.299 18.7698 129.657 18.7698C130.053 18.7698 130.379 18.6849 130.633 18.5152C130.897 18.3455 131.09 18.1193 131.213 17.8365H132.938C132.806 18.2796 132.589 18.6802 132.288 19.0384C131.986 19.3872 131.614 19.6653 131.17 19.8727C130.727 20.0707 130.228 20.1697 129.672 20.1697ZM140.912 20.1697C140.234 20.1697 139.621 20.0141 139.074 19.703C138.537 19.3825 138.113 18.9442 137.802 18.388C137.5 17.8223 137.349 17.1766 137.349 16.4507C137.349 15.706 137.505 15.0555 137.816 14.4993C138.127 13.9337 138.551 13.4953 139.088 13.1842C139.635 12.8637 140.248 12.7034 140.927 12.7034C141.605 12.7034 142.213 12.8637 142.751 13.1842C143.298 13.4953 143.722 13.929 144.023 14.4851C144.334 15.0413 144.49 15.6918 144.49 16.4366C144.49 17.1813 144.334 17.8318 144.023 18.388C143.712 18.9442 143.283 19.3825 142.737 19.703C142.199 20.0141 141.591 20.1697 140.912 20.1697ZM140.912 18.7132C141.252 18.7132 141.558 18.6284 141.832 18.4587C142.114 18.289 142.341 18.0345 142.51 17.6951C142.68 17.3557 142.765 16.9362 142.765 16.4366C142.765 15.9369 142.68 15.5221 142.51 15.1922C142.35 14.8528 142.129 14.5983 141.846 14.4286C141.572 14.2589 141.266 14.1741 140.927 14.1741C140.597 14.1741 140.29 14.2589 140.007 14.4286C139.725 14.5983 139.498 14.8528 139.329 15.1922C139.159 15.5221 139.074 15.9369 139.074 16.4366C139.074 16.9362 139.159 17.3557 139.329 17.6951C139.498 18.0345 139.72 18.289 139.993 18.4587C140.276 18.6284 140.583 18.7132 140.912 18.7132ZM145.868 20V12.8731H147.367L147.494 14.0609C147.711 13.6461 148.022 13.3162 148.428 13.0711C148.833 12.826 149.314 12.7034 149.87 12.7034C150.445 12.7034 150.935 12.826 151.341 13.0711C151.746 13.3068 152.057 13.6556 152.274 14.1175C152.5 14.5794 152.613 15.1545 152.613 15.8427V20H150.917V15.9982C150.917 15.4043 150.785 14.9471 150.521 14.6266C150.257 14.306 149.865 14.1458 149.347 14.1458C149.008 14.1458 148.701 14.2259 148.428 14.3862C148.164 14.5464 147.952 14.7821 147.791 15.0932C147.641 15.3949 147.565 15.7625 147.565 16.1962V20H145.868ZM157.346 20V10.1016H159.043V14.1882L162.776 10.1016H164.883L161.22 14.0326L164.967 20H162.903L160.018 15.3336L159.043 16.3941V20H157.346ZM168.712 20.1697C168.033 20.1697 167.42 20.0141 166.873 19.703C166.336 19.3825 165.912 18.9442 165.601 18.388C165.299 17.8223 165.148 17.1766 165.148 16.4507C165.148 15.706 165.304 15.0555 165.615 14.4993C165.926 13.9337 166.35 13.4953 166.887 13.1842C167.434 12.8637 168.047 12.7034 168.726 12.7034C169.404 12.7034 170.012 12.8637 170.55 13.1842C171.097 13.4953 171.521 13.929 171.822 14.4851C172.134 15.0413 172.289 15.6918 172.289 16.4366C172.289 17.1813 172.134 17.8318 171.822 18.388C171.511 18.9442 171.082 19.3825 170.536 19.703C169.998 20.0141 169.39 20.1697 168.712 20.1697ZM168.712 18.7132C169.051 18.7132 169.357 18.6284 169.631 18.4587C169.913 18.289 170.14 18.0345 170.309 17.6951C170.479 17.3557 170.564 16.9362 170.564 16.4366C170.564 15.9369 170.479 15.5221 170.309 15.1922C170.149 14.8528 169.928 14.5983 169.645 14.4286C169.371 14.2589 169.065 14.1741 168.726 14.1741C168.396 14.1741 168.089 14.2589 167.807 14.4286C167.524 14.5983 167.297 14.8528 167.128 15.1922C166.958 15.5221 166.873 15.9369 166.873 16.4366C166.873 16.9362 166.958 17.3557 167.128 17.6951C167.297 18.0345 167.519 18.289 167.792 18.4587C168.075 18.6284 168.382 18.7132 168.712 18.7132ZM173.78 16.5355V15.1215H179.635V16.5355H173.78ZM181.734 20V12.0954C181.734 11.5486 181.823 11.1102 182.002 10.7803C182.191 10.4409 182.459 10.1958 182.808 10.045C183.157 9.89415 183.572 9.81874 184.053 9.81874H184.901V11.2611H184.307C183.996 11.2611 183.77 11.3271 183.628 11.4591C183.496 11.5816 183.43 11.7984 183.43 12.1095V20H181.734ZM180.715 14.3013V12.8731H185.043V14.3013H180.715ZM186.291 20V12.8731H187.988V20H186.291ZM187.14 11.7419C186.829 11.7419 186.569 11.6476 186.362 11.4591C186.164 11.2611 186.065 11.0207 186.065 10.7379C186.065 10.4456 186.164 10.21 186.362 10.0308C186.569 9.84231 186.829 9.74803 187.14 9.74803C187.451 9.74803 187.705 9.84231 187.903 10.0308C188.111 10.21 188.214 10.4456 188.214 10.7379C188.214 11.0207 188.111 11.2611 187.903 11.4591C187.705 11.6476 187.451 11.7419 187.14 11.7419Z"
                  fill="#FFFFFF"
                />
                <path
                  d="M29.1393 24.6047C25.8118 24.6047 23.1053 23.1165 21.5189 20.4141C20.1144 18.0454 20 15.4798 20 12.613C20 10.9135 20.5113 9.43371 21.4779 8.33338C22.3663 7.32279 23.625 6.66813 25.0228 6.48986C26.6821 6.27967 28.7448 6.26221 30.8895 6.26221C34.3796 6.26221 35.3655 6.30497 36.7386 6.44228C38.5653 6.62356 40.1022 7.30532 41.1827 8.41408C42.28 9.54031 42.86 11.0442 42.86 12.7648V13.1105C42.86 16.0465 40.8972 18.5038 38.1618 19.1717C37.9576 19.6535 37.7047 20.1329 37.4053 20.605L37.3975 20.6171C36.4339 22.1065 34.1688 24.6053 29.8301 24.6053H29.1387L29.1393 24.6047Z"
                  fill="white"
                />
                <path
                  d="M36.5946 7.87964C35.2979 7.75015 34.3903 7.70679 30.8894 7.70679C28.6417 7.70679 26.7398 7.72847 25.2058 7.923C23.1744 8.18257 21.4453 9.73822 21.4453 12.6128C21.4453 15.4874 21.5965 17.7133 22.7637 19.6797C24.082 21.9274 26.2863 23.159 29.1392 23.159H29.8306C33.3315 23.159 35.2335 21.3004 36.1845 19.8309C36.5952 19.1823 36.8975 18.5342 37.092 17.8856C39.5776 17.6694 41.4145 15.6163 41.4145 13.1097V12.764C41.4145 10.0628 39.6426 8.18257 36.5952 7.87964H36.5946Z"
                  fill="white"
                />
                <path
                  d="M21.4459 12.6128C21.4459 9.73822 23.175 8.18257 25.2064 7.923C26.741 7.72847 28.6429 7.70679 30.89 7.70679C34.3909 7.70679 35.2985 7.75015 36.5952 7.87964C39.6426 8.18197 41.4145 10.0622 41.4145 12.764V13.1097C41.4145 15.6169 39.5776 17.67 37.0921 17.8856C36.8975 18.5342 36.5952 19.1823 36.1844 19.8309C35.2335 21.3004 33.3315 23.159 29.8306 23.159H29.1392C26.2863 23.159 24.082 21.9274 22.7637 19.6797C21.5965 17.7133 21.4453 15.5301 21.4453 12.6128"
                  fill="#202020"
                />
                <path
                  d="M23.065 12.6343C23.065 15.4222 23.2379 17.2157 24.1455 18.8797C25.1826 20.8034 27.0629 21.5381 29.2027 21.5381H29.8724C32.682 21.5381 34.0437 20.1764 34.8001 18.9881C35.1675 18.3829 35.4915 17.7132 35.6643 16.87L35.7938 16.3298H36.572C38.301 16.3298 39.7922 14.9253 39.7922 13.1311V12.8071C39.7922 10.7974 38.5389 9.73801 36.3557 9.47905C35.1241 9.37125 34.3894 9.32788 30.8878 9.32788C28.5324 9.32788 26.8466 9.34955 25.5717 9.54409C23.7781 9.80367 23.0645 10.8191 23.0645 12.6343"
                  fill="white"
                />
                <path
                  d="M35.7969 14.1256C35.7969 14.3852 35.9914 14.5797 36.3371 14.5797C37.4393 14.5797 38.0445 13.9528 38.0445 12.9157C38.0445 11.8786 37.4393 11.23 36.3371 11.23C35.9914 11.23 35.7969 11.4245 35.7969 11.6841V14.1263V14.1256Z"
                  fill="#202020"
                />
                <path
                  d="M25.1842 13.9968C25.1842 15.2718 25.8973 16.374 26.8049 17.2388C27.4102 17.8224 28.3611 18.4277 29.0092 18.8167C29.2037 18.9245 29.3982 18.9896 29.6144 18.9896C29.874 18.9896 30.0896 18.9245 30.2631 18.8167C30.9117 18.4277 31.8621 17.8224 32.4457 17.2388C33.375 16.3746 34.088 15.2724 34.088 13.9968C34.088 12.6134 33.0509 11.3818 31.5597 11.3818C30.6738 11.3818 30.0685 11.8359 29.6144 12.4623C29.2037 11.8353 28.5773 11.3818 27.6908 11.3818C26.1779 11.3818 25.1836 12.6134 25.1836 13.9968"
                  fill="#FF5A16"
                />
              </g>
              <defs>
                <clipPath id="clip0_2178_644">
                  <rect width="223" height="30" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </a>
        </div>
        <div class="app-content xspool-bg post-install" hidden>
          <img src="./public/networks.webp" alt="Networks" />
          <div class="instructions">
            <h3>Installation complete</h3>
            <p>Change the network settings of your device to connect to the xspool-xxxx network</p>

            <p>Once connected, click the button below to open the xspool app</p>
            <button class="redirect" onclick="handleConnected()">OPEN XSPOOL</button>
            <div class="error" hidden>
              <p>Unable to connect to the device.</p>
            </div>
        </div>
        <div class="lds-ellipsis" hidden><div></div><div></div><div></div><div></div></div>
      </div>
    </div>

    <script>
      const devMode = localStorage.getItem("ᗢ") === "true";

      if (devMode) {
        document
          .querySelector("esp-web-install-button")
          .setAttribute(
            "manifest",
            "https://xperiments.in/xspool-bin/webusb/xspool-manifest-dev.json"
          );
      }

      (function () {
        const originalLog = console.log;
        let detectedMac = null; // Variable to store the MAC address
        let isDisconnected = false; // Flag to check if "DISCONNECT" is present

        console.log = function (...args) {
          const macRegex = /(?:[0-9A-Fa-f]{2}[:-]){5}[0-9A-Fa-f]{2}/;

          for (const arg of args) {
            if (typeof arg === "string") {
              const macMatch = arg.match(macRegex);
              if (macMatch) {
                detectedMac = macMatch[0]; // Store the first MAC address found
              }

              if (arg.includes("DISCONNECT")) {
                isDisconnected = true;
                document.getElementsByTagName("ewt-install-dialog")[0].remove();
                document.querySelector(".install").setAttribute("hidden", true);
                document.querySelector(".post-install").removeAttribute("hidden");
              }
            }
          }

          originalLog(...args);
        };

        // Expose detectedMac and isDisconnected globally (optional)
        window.getDetectedMac = () => detectedMac;
        window.isDisconnected = () => isDisconnected;
      })();


      const handleConnected = async () => {
        document.querySelector(".error").setAttribute("hidden", true);
        document.querySelector(".lds-ellipsis").removeAttribute("hidden");
        try{
          const response = await fetch(`http://192.168.4.1`, {
            mode: "no-cors",
          });
          setTimeout(() => {
            window.open(`ttp://192.168.4.1`,'_blank');
          }, 1000);
        }  catch (error) {
          document.querySelector(".error").removeAttribute("hidden");
          document.querySelector(".lds-ellipsis").setAttribute("hidden", true);
        }
      };

    </script>
  </body>
</html>
